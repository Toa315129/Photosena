<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sena Photobooth</title>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Nunito:wght@400;700&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: 'Nunito', sans-serif;
  background: linear-gradient(180deg, #f0faff, #ffffff);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  color: #444;
}

/* Container */
.container {
  text-align: center;
  width: 100%;
  max-width: 960px;
  padding: 20px;
}

/* Title */
h1 {
  font-family: 'Pacifico', cursive;
  font-size: 50px;
  color: #3da9fc;
  margin-bottom: 20px;
  text-shadow: 2px 2px 6px rgba(61,169,252,0.2);
}

/* Camera Box */
#camera {
  position: relative;
  width: 640px;
  height: 480px;
  margin: 0 auto 20px auto;
  border-radius: 20px;
  overflow: hidden;
  background: #000;
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}
#camera video {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Flash effect */
#flash {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: #fff;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

/* Buttons */
button {
  background: #3da9fc;
  border: none;
  color: #fff;
  font-size: 18px;
  padding: 12px 28px;
  border-radius: 30px;
  cursor: pointer;
  margin: 8px;
  transition: all 0.3s;
  box-shadow: 0 4px 10px rgba(61,169,252,0.3);
}
button:hover {
  background: #90dbf4;
  transform: translateY(-2px);
}

/* Thumbnails */
#thumbnails {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 20px;
  gap: 10px;
}
#thumbnails img {
  width: 100px;
  height: 75px;
  object-fit: cover;
  border-radius: 10px;
  border: 3px solid #cde8ff;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

/* Download Page */
#download-page {
  display: none;
  padding: 20px;
}
#frame {
  width: 600px; height: 900px;
  margin: 20px auto;
  border-radius: 20px;
  background: #fff;
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  position: relative;
  padding: 20px;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
}
.photo {
  width: 45%; height: 28%;
  margin: 8px;
  background-size: cover;
  background-position: center;
  border: 4px solid #cde8ff;
  border-radius: 12px;
}

/* Title in Frame */
#frame-title {
  position: absolute;
  top: 10px;
  width: 100%;
  text-align: center;
  font-family: 'Pacifico', cursive;
  font-size: 32px;
  color: #3da9fc;
}

/* Stickers */
#stickers {
  margin-top: 20px;
}
.sticker {
  font-size: 32px;
  margin: 6px;
  cursor: grab;
}
.sticker-on-frame {
  position: absolute;
  cursor: grab;
}

/* Decorative Stars */
.star {
  position: absolute;
  opacity: 0.8;
}
.star.yellow { color: #ffd93d; }
.star.pink { color: #ff90b3; }
.star.blue { color: #90dbf4; }
#star1 { top: 10px; left: 10px; font-size: 36px; }
#star2 { top: 10px; right: 20px; font-size: 42px; }
#star3 { bottom: 20px; left: 30px; font-size: 30px; }
#star4 { bottom: 20px; right: 20px; font-size: 40px; }

/* Extra floating stars */
.floating-star {
  position: absolute;
  font-size: 18px;
  opacity: 0.6;
  animation: twinkle 2s infinite ease-in-out alternate;
}
@keyframes twinkle {
  from { opacity: 0.4; transform: scale(1);}
  to { opacity: 1; transform: scale(1.2);}
}
</style>
</head>

<body>
<div class="container">
  <h1>Sena Photobooth</h1>

  <!-- Camera -->
  <div id="camera">
    <video id="video" autoplay></video>
    <div id="flash"></div>
  </div>
  <button id="capture">Take Photo</button>
  <button id="retake">Retake</button>
  <button id="switch">Switch Box</button>
  <button id="finish">Finish & Download</button>

  <!-- Thumbnails -->
  <div id="thumbnails"></div>

  <!-- Stickers -->
  <div id="stickers">
    <span class="sticker">ðŸ˜º</span>
    <span class="sticker">ðŸ‘“</span>
    <span class="sticker">ðŸ‘‘</span>
    <span class="sticker">ðŸŽ€</span>
  </div>

  <!-- Download Page -->
  <div id="download-page">
    <div id="frame">
      <div id="frame-title">Sena Photobooth</div>
      <!-- Stars decoration -->
      <div class="star yellow" id="star1">â˜…</div>
      <div class="star pink" id="star2">â˜…</div>
      <div class="star blue" id="star3">â˜…</div>
      <div class="star yellow" id="star4">â˜…</div>
      <!-- Extra floating stars -->
      <div class="floating-star yellow" style="top:50px;left:150px">â˜…</div>
      <div class="floating-star blue" style="top:120px;right:80px">â˜…</div>
      <div class="floating-star pink" style="bottom:150px;left:120px">â˜…</div>
      <div class="floating-star yellow" style="bottom:200px;right:100px">â˜…</div>
    </div>
    <button id="print">Print</button>
    <button id="download">Download</button>
  </div>
</div>

<script>
const video = document.getElementById('video');
const flash = document.getElementById('flash');
const captureBtn = document.getElementById('capture');
const retakeBtn = document.getElementById('retake');
const switchBtn = document.getElementById('switch');
const finishBtn = document.getElementById('finish');
const thumbnails = document.getElementById('thumbnails');
const downloadPage = document.getElementById('download-page');
const frame = document.getElementById('frame');
const downloadBtn = document.getElementById('download');
const printBtn = document.getElementById('print');
let photos = [];

// Webcam
navigator.mediaDevices.getUserMedia({ video: true })
  .then(stream => { video.srcObject = stream; })
  .catch(err => console.error("Camera error:", err));

// Flash effect
function doFlash() {
  flash.style.opacity = 1;
  setTimeout(()=> flash.style.opacity = 0, 200);
}

// Capture photo
captureBtn.onclick = () => {
  doFlash();
  let canvas = document.createElement('canvas');
  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  let ctx = canvas.getContext('2d');
  ctx.drawImage(video, 0, 0);
  let data = canvas.toDataURL('image/png');
  photos.push(data);

  let img = document.createElement('img');
  img.src = data;
  thumbnails.appendChild(img);
};

// Retake (clear last photo)
retakeBtn.onclick = () => {
  photos.pop();
  thumbnails.lastChild?.remove();
};

// Switch Box (just clears thumbnails for demo)
switchBtn.onclick = () => {
  photos = [];
  thumbnails.innerHTML = "";
};

// Finish
finishBtn.onclick = () => {
  frame.querySelectorAll('.photo').forEach(p => p.remove());
  photos.forEach(src => {
    let div = document.createElement('div');
    div.className = 'photo';
    div.style.backgroundImage = `url(${src})`;
    frame.appendChild(div);
  });
  downloadPage.style.display = 'block';
  window.scrollTo(0,document.body.scrollHeight);
};

// Stickers draggable
document.querySelectorAll('.sticker').forEach(sticker => {
  sticker.onclick = () => {
    let span = sticker.cloneNode(true);
    span.classList.add('sticker-on-frame');
    span.style.top = "50px";
    span.style.left = "50px";
    frame.appendChild(span);

    let isDragging = false;
    span.onmousedown = e => {
      isDragging = true;
      let offsetX = e.offsetX, offsetY = e.offsetY;
      document.onmousemove = ev => {
        if(isDragging){
          span.style.left = ev.pageX - frame.offsetLeft - offsetX + "px";
          span.style.top = ev.pageY - frame.offsetTop - offsetY + "px";
        }
      };
      document.onmouseup = () => { isDragging = false; };
    };
  };
});

// Download
downloadBtn.onclick = () => {
  alert("ðŸ’¾ Downloading photo strip...");
};

// Print
printBtn.onclick = () => {
  window.print();
};
</script>
</body>
</html>
