<<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sena Photobooth</title>

<!-- ‡∏ü‡∏≠‡∏ô‡∏ï‡πå -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  padding: 0;
  background: #faf9f7;
  font-family: 'Cinzel', serif;
  text-align: center;
}

/* ‡∏Å‡∏£‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏Å */
#frame {
  width: 600px; /* ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á 4x6 ‡∏ô‡∏¥‡πâ‡∏ß */
  height: 900px;
  margin: 30px auto;
  border: 14px solid #fff;
  box-shadow: 0 0 25px rgba(0,0,0,0.25);
  background: #fff;
  position: relative;
  overflow: hidden;
}

/* ‡∏´‡∏±‡∏ß‡πÇ‡∏•‡πÇ‡∏Å‡πâ */
#frame h1 {
  font-family: 'Great Vibes', cursive;
  font-size: 52px;
  color: #145c3c;
  margin: 12px 0 0;
}
#frame h2 {
  font-size: 18px;
  color: #145c3c;
  margin: -8px 0 25px;
  letter-spacing: 2px;
}

/* ‡∏ä‡πà‡∏≠‡∏á‡∏†‡∏≤‡∏û */
.photo-box {
  width: 45%;
  height: 26%;
  border: 3px solid #145c3c;
  margin: 10px;
  background: #eee;
  display: inline-block;
  vertical-align: top;
  background-size: cover;
  background-position: center;
  box-shadow: inset 0 0 8px rgba(0,0,0,0.15);
}

/* ‡∏õ‡∏∏‡πà‡∏° */
button {
  margin: 15px;
  padding: 12px 25px;
  font-size: 18px;
  background: #145c3c;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}
button:hover {
  background: #1b7a52;
}

/* ‡∏Å‡∏£‡∏≠‡∏ö‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á */
.star {
  position: absolute;
  top: 80px;
  left: -30px;
  font-size: 120px;
  color: #1b7a52;
  transform: rotate(-20deg);
  opacity: 0.2;
}
.ribbon {
  position: absolute;
  bottom: 120px;
  right: -20px;
  font-size: 140px;
  color: #1b7a52;
  transform: rotate(25deg);
  opacity: 0.15;
}
.sparkle {
  position: absolute;
  top: 40%;
  left: 40%;
  font-size: 50px;
  color: #fff;
  text-shadow: 0 0 8px rgba(255,255,255,0.8);
}
</style>
</head>
<body>

<div id="frame">
  <h1>Sena</h1>
  <h2>PHOTO BOOTH</h2>
  
  <!-- 6 ‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏π‡∏õ -->
  <div class="photo-box" id="p1"></div>
  <div class="photo-box" id="p2"></div><br>
  <div class="photo-box" id="p3"></div>
  <div class="photo-box" id="p4"></div><br>
  <div class="photo-box" id="p5"></div>
  <div class="photo-box" id="p6"></div>
  
  <!-- ‡∏Å‡∏£‡∏≠‡∏ö‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á -->
  <div class="star">‚òÖ</div>
  <div class="ribbon">‚ûø</div>
  <div class="sparkle">‚ú¶</div>
</div>

<button onclick="startBooth()">üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ñ‡πà‡∏≤‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</button>
<button onclick="download()">‚¨áÔ∏è ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î</button>

<script>
let count = 1;
let taking = false;

function capturePhoto(slot) {
  return new Promise((resolve) => {
    navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => {
        let video = document.createElement("video");
        video.srcObject = stream;
        video.play();

        setTimeout(() => {
          let canvas = document.createElement("canvas");
          canvas.width = 400;
          canvas.height = 300;
          let ctx = canvas.getContext("2d");
          ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
          document.getElementById(slot).style.backgroundImage = "url(" + canvas.toDataURL("image/png") + ")";
          stream.getTracks().forEach(track => track.stop());
          resolve();
        }, 3000); // ‡πÄ‡∏ß‡∏•‡∏≤‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û 3 ‡∏ß‡∏¥
      });
  });
}

async function startBooth() {
  if (taking) return;
  taking = true;
  count = 1;

  for (let i = 1; i <= 6; i++) {
    await capturePhoto("p" + i);
    await new Promise(r => setTimeout(r, 1000)); // ‡πÄ‡∏ß‡πâ‡∏ô 1 ‡∏ß‡∏¥
  }

  taking = false;
}

function download(){
  html2canvas(document.querySelector("#frame")).then(canvas => {
    let link = document.createElement("a");
    link.download = "sena_photobooth.png";
    link.href = canvas.toDataURL();
    link.click();
  });
}
</script>

<!-- ‡πÇ‡∏´‡∏•‡∏î html2canvas -->
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

</body>
</html>
